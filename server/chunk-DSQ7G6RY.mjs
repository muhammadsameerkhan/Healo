import './polyfills.server.mjs';
import{A as v,B as ot,C as u,D as h,E as g,F as Q,Fa as Dt,G as M,H as j,I as F,J as P,K as N,L as at,M as A,N as ke,O as lt,P as ct,Q as ut,R as je,S as T,T as dt,U as X,V as ht,W as ft,Y as pt,a as Xe,aa as gt,b as Ze,c as et,ca as mt,d as tt,e as Ie,ea as _t,f as xe,fa as ce,g as B,ga as G,h as x,ha as vt,i as Fe,ia as Ge,j as L,k as nt,ka as ue,l as it,la as yt,m as S,ma as de,n as I,na as Ct,o as st,oa as $,p as H,pa as bt,q as Pe,qa as Et,r as rt,ra as Mt,s as Ne,sa as he,t as y,ta as q,u as E,ua as fe,v as Te,va as wt,w as le,wa as Ot,x as J,y as U,z as Re,za as At}from"./chunk-5EAMSRBF.mjs";import{a as O,b as D,h as d,l as Qe}from"./chunk-4KZRSLMR.mjs";var un=n=>({active:n}),dn=(n,t)=>({active:n,"blink-border":t}),pe=class n{dataEmitter=new H;currentSection="hero";get isChatActive(){return this.currentSection==="chat"}sendData(t){debugger;this.currentSection=t,this.dataEmitter.emit(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-header"]],inputs:{currentSection:"currentSection"},outputs:{dataEmitter:"dataEmitter"},standalone:!0,features:[T],decls:13,vars:7,consts:[["id","header",1,"header","d-flex","flex-column","justify-content-center"],["id","navmenu",1,"navmenu"],[3,"click","ngClass"],[1,"bi","bi-house","navicon"],[1,"bi","bi-chat-dots","navicon"]],template:function(e,i){e&1&&(u(0,"header",0)(1,"nav",1)(2,"ul")(3,"li")(4,"a",2),M("click",function(){return i.sendData("hero")}),g(5,"i",3),u(6,"span"),A(7,"Home"),h()()(),u(8,"li")(9,"a",2),M("click",function(){return i.sendData("chat")}),g(10,"i",4),u(11,"span"),A(12,"Chat"),h()()()()()()),e&2&&(y(4),v("ngClass",dt(2,un,i.currentSection==="hero")),y(5),v("ngClass",X(4,dn,i.currentSection==="chat",!i.isChatActive)))},dependencies:[$,ue],styles:[".header[_ngcontent-%COMP%]{color:var(--default-color);position:fixed;top:0;left:0;bottom:0;padding:0 15px;transition:all ease-in-out .3s;overflow-y:auto;z-index:997;min-width:200px}@media (max-width: 1199px){.header[_ngcontent-%COMP%]{background-color:var(--background-color);border-right:1px solid color-mix(in srgb,var(--default-color),transparent 90%);width:300px;left:-100%}}@media (min-width: 1200px) and (max-width: 1600px){.header[_ngcontent-%COMP%] ~ main[_ngcontent-%COMP%]{margin-left:160px}.header[_ngcontent-%COMP%] ~ main[_ngcontent-%COMP%]   .hero[_ngcontent-%COMP%]{margin-left:-160px;width:100vw}}.header.header-show[_ngcontent-%COMP%]{left:0}.header[_ngcontent-%COMP%]   .header-toggle[_ngcontent-%COMP%]{color:var(--contrast-color);background-color:var(--accent-color);font-size:22px;display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;cursor:pointer;position:fixed;top:15px;right:15px;z-index:9999;transition:background-color .3s}.header[_ngcontent-%COMP%]   .header-toggle[_ngcontent-%COMP%]:hover{color:var(--contrast-color);background-color:color-mix(in srgb,var(--accent-color) 90%,white 15%)}.navmenu[_ngcontent-%COMP%]{padding:0;z-index:9997;cursor:pointer}.navmenu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0 0 20px;margin:0;width:140px}.navmenu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .navmenu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:var(--nav-color);font-family:var(--nav-font);display:flex;align-items:center;padding:10px 18px;margin-bottom:8px;font-size:15px;border-radius:50px;background:color-mix(in srgb,var(--default-color),transparent 92%);height:56px;width:100%;overflow:hidden;transition:.3s}.navmenu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .navmenu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus   i[_ngcontent-%COMP%]{font-size:20px}.navmenu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .navmenu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus   span[_ngcontent-%COMP%]{padding:0 5px 0 7px}@media (min-width: 992px){.navmenu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .navmenu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{max-width:56px}.navmenu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .navmenu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus   span[_ngcontent-%COMP%]{display:none}}.navmenu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .navmenu[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%], .navmenu[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]:focus, .navmenu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover > a[_ngcontent-%COMP%]{color:var(--contrast-color);background:var(--nav-hover-color)}.navmenu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .navmenu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover > a[_ngcontent-%COMP%]{max-width:100%;color:var(--contrast-color)}.navmenu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%], .navmenu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover > a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}@keyframes _ngcontent-%COMP%_borderBlink{0%{box-shadow:0 0 #007bff66}70%{box-shadow:0 0 0 10px #007bff00}to{box-shadow:0 0 #007bff00}}.blink-border[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_borderBlink 2s infinite;border-radius:50%}.blink-border[_ngcontent-%COMP%]:hover{animation:none}"]})};function Le(){return Le=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Le.apply(this,arguments)}var hn={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(n){},onComplete:function(n){},preStringTyped:function(n,t){},onStringTyped:function(n,t){},onLastStringBackspaced:function(n){},onTypingPaused:function(n,t){},onTypingResumed:function(n,t){},onReset:function(n){},onStop:function(n,t){},onStart:function(n,t){},onDestroy:function(n){}},fn=new(function(){function n(){}var t=n.prototype;return t.load=function(e,i,s){if(e.el=typeof s=="string"?document.querySelector(s):s,e.options=Le({},hn,i),e.isInput=e.el.tagName.toLowerCase()==="input",e.attr=e.options.attr,e.bindInputFocusEvents=e.options.bindInputFocusEvents,e.showCursor=!e.isInput&&e.options.showCursor,e.cursorChar=e.options.cursorChar,e.cursorBlinking=!0,e.elContent=e.attr?e.el.getAttribute(e.attr):e.el.textContent,e.contentType=e.options.contentType,e.typeSpeed=e.options.typeSpeed,e.startDelay=e.options.startDelay,e.backSpeed=e.options.backSpeed,e.smartBackspace=e.options.smartBackspace,e.backDelay=e.options.backDelay,e.fadeOut=e.options.fadeOut,e.fadeOutClass=e.options.fadeOutClass,e.fadeOutDelay=e.options.fadeOutDelay,e.isPaused=!1,e.strings=e.options.strings.map(function(f){return f.trim()}),e.stringsElement=typeof e.options.stringsElement=="string"?document.querySelector(e.options.stringsElement):e.options.stringsElement,e.stringsElement){e.strings=[],e.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var r=Array.prototype.slice.apply(e.stringsElement.children),o=r.length;if(o)for(var a=0;a<o;a+=1)e.strings.push(r[a].innerHTML.trim())}for(var l in e.strPos=0,e.currentElContent=this.getCurrentElContent(e),e.currentElContent&&e.currentElContent.length>0&&(e.strPos=e.currentElContent.length-1,e.strings.unshift(e.currentElContent)),e.sequence=[],e.strings)e.sequence[l]=l;e.arrayPos=0,e.stopNum=0,e.loop=e.options.loop,e.loopCount=e.options.loopCount,e.curLoop=0,e.shuffle=e.options.shuffle,e.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},e.typingComplete=!1,e.autoInsertCss=e.options.autoInsertCss,e.autoInsertCss&&(this.appendCursorAnimationCss(e),this.appendFadeOutAnimationCss(e))},t.getCurrentElContent=function(e){return e.attr?e.el.getAttribute(e.attr):e.isInput?e.el.value:e.contentType==="html"?e.el.innerHTML:e.el.textContent},t.appendCursorAnimationCss=function(e){var i="data-typed-js-cursor-css";if(e.showCursor&&!document.querySelector("["+i+"]")){var s=document.createElement("style");s.setAttribute(i,"true"),s.innerHTML=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `,document.body.appendChild(s)}},t.appendFadeOutAnimationCss=function(e){var i="data-typed-fadeout-js-css";if(e.fadeOut&&!document.querySelector("["+i+"]")){var s=document.createElement("style");s.setAttribute(i,"true"),s.innerHTML=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `,document.body.appendChild(s)}},n}()),St=new(function(){function n(){}var t=n.prototype;return t.typeHtmlChars=function(e,i,s){if(s.contentType!=="html")return i;var r=e.substring(i).charAt(0);if(r==="<"||r==="&"){var o;for(o=r==="<"?">":";";e.substring(i+1).charAt(0)!==o&&!(1+ ++i>e.length););i++}return i},t.backSpaceHtmlChars=function(e,i,s){if(s.contentType!=="html")return i;var r=e.substring(i).charAt(0);if(r===">"||r===";"){var o;for(o=r===">"?"<":"&";e.substring(i-1).charAt(0)!==o&&!(--i<0););i--}return i},n}()),It=function(){function n(e,i){fn.load(this,i,e),this.begin()}var t=n.prototype;return t.toggle=function(){this.pause.status?this.start():this.stop()},t.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},t.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},t.destroy=function(){this.reset(!1),this.options.onDestroy(this)},t.reset=function(e){e===void 0&&(e=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,e&&(this.insertCursor(),this.options.onReset(this),this.begin())},t.begin=function(){var e=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){e.strPos===0?e.typewrite(e.strings[e.sequence[e.arrayPos]],e.strPos):e.backspace(e.strings[e.sequence[e.arrayPos]],e.strPos)},this.startDelay)},t.typewrite=function(e,i){var s=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var r=this.humanizer(this.typeSpeed),o=1;this.pause.status!==!0?this.timeout=setTimeout(function(){i=St.typeHtmlChars(e,i,s);var a=0,l=e.substring(i);if(l.charAt(0)==="^"&&/^\^\d+/.test(l)){var f=1;f+=(l=/\d+/.exec(l)[0]).length,a=parseInt(l),s.temporaryPause=!0,s.options.onTypingPaused(s.arrayPos,s),e=e.substring(0,i)+e.substring(i+f),s.toggleBlinking(!0)}if(l.charAt(0)==="`"){for(;e.substring(i+o).charAt(0)!=="`"&&(o++,!(i+o>e.length)););var p=e.substring(0,i),b=e.substring(p.length+1,i+o),c=e.substring(i+o+1);e=p+b+c,o--}s.timeout=setTimeout(function(){s.toggleBlinking(!1),i>=e.length?s.doneTyping(e,i):s.keepTyping(e,i,o),s.temporaryPause&&(s.temporaryPause=!1,s.options.onTypingResumed(s.arrayPos,s))},a)},r):this.setPauseStatus(e,i,!0)},t.keepTyping=function(e,i,s){i===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var r=e.substring(0,i+=s);this.replaceText(r),this.typewrite(e,i)},t.doneTyping=function(e,i){var s=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount)||(this.timeout=setTimeout(function(){s.backspace(e,i)},this.backDelay))},t.backspace=function(e,i){var s=this;if(this.pause.status!==!0){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var r=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){i=St.backSpaceHtmlChars(e,i,s);var o=e.substring(0,i);if(s.replaceText(o),s.smartBackspace){var a=s.strings[s.arrayPos+1];s.stopNum=a&&o===a.substring(0,i)?i:0}i>s.stopNum?(i--,s.backspace(e,i)):i<=s.stopNum&&(s.arrayPos++,s.arrayPos===s.strings.length?(s.arrayPos=0,s.options.onLastStringBackspaced(),s.shuffleStringsIfNeeded(),s.begin()):s.typewrite(s.strings[s.sequence[s.arrayPos]],i))},r)}else this.setPauseStatus(e,i,!1)},t.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},t.setPauseStatus=function(e,i,s){this.pause.typewrite=s,this.pause.curString=e,this.pause.curStrPos=i},t.toggleBlinking=function(e){this.cursor&&(this.pause.status||this.cursorBlinking!==e&&(this.cursorBlinking=e,e?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},t.humanizer=function(e){return Math.round(Math.random()*e/2)+e},t.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))},t.initFadeOut=function(){var e=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){e.arrayPos++,e.replaceText(""),e.strings.length>e.arrayPos?e.typewrite(e.strings[e.sequence[e.arrayPos]],0):(e.typewrite(e.strings[0],0),e.arrayPos=0)},this.fadeOutDelay)},t.replaceText=function(e){this.attr?this.el.setAttribute(this.attr,e):this.isInput?this.el.value=e:this.contentType==="html"?this.el.innerHTML=e:this.el.textContent=e},t.bindFocusEvents=function(){var e=this;this.isInput&&(this.el.addEventListener("focus",function(i){e.stop()}),this.el.addEventListener("blur",function(i){e.el.value&&e.el.value.length!==0||e.start()}))},t.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},n}();var pn=["typedElement"],me=class n{typedElement;typed;ngOnInit(){let t={strings:["Medical Assistant","Health Companion","Symptom Checker"],typeSpeed:100,backSpeed:50,backDelay:2e3,loop:!0,showCursor:!0};this.typedElement&&(this.typed=new It(this.typedElement.nativeElement,t))}ngOnDestroy(){this.typed&&this.typed.destroy()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-hero"]],viewQuery:function(e,i){if(e&1&&F(pn,7),e&2){let s;P(s=N())&&(i.typedElement=s.first)}},standalone:!0,features:[T],decls:17,vars:0,consts:[["typedElement",""],["id","hero",1,"hero","section"],["data-aos","zoom-out",1,"container"],[1,"row","justify-content-center"],[1,"col-lg-9"],[1,"social-links"],["href","https://www.facebook.com/share/15j6gvnb2h/"],[1,"bi","bi-facebook"],["href","https://www.instagram.com/m.sameerkhan/profilecard/?igsh=OHBxNW01cWJmaWJ5"],[1,"bi","bi-instagram"],["href","https://www.linkedin.com/in/sameer-0s99/"],[1,"bi","bi-linkedin"]],template:function(e,i){e&1&&(u(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h2"),A(5,"HEALO"),h(),u(6,"p"),A(7,"Your AI-powered "),g(8,"span",null,0),h(),u(10,"div",5)(11,"a",6),g(12,"i",7),h(),u(13,"a",8),g(14,"i",9),h(),u(15,"a",10),g(16,"i",11),h()()()()()())},styles:[".hero[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:center;text-align:center;position:relative}.container[_ngcontent-%COMP%]{z-index:1;padding:20px}.hero[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:64px;font-weight:700}.hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0;font-size:26px}.hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{letter-spacing:1px;border-bottom:2px solid var(--accent-color)}.hero[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin-top:25px}.hero[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:20px;display:inline-block;color:color-mix(in srgb,var(--default-color),transparent 30%);line-height:1;margin-right:20px;transition:.3s}.hero[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--accent-color)}@media (max-width: 768px){.hero[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:32px}.hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}"]})};var jt=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(i){return new(i||n)(E(Te),E(Pe))}}static{this.\u0275dir=L({type:n})}}return n})(),gn=(()=>{class n extends jt{static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=st(n)))(s||n)}})()}static{this.\u0275dir=L({type:n,features:[J]})}}return n})(),Gt=new B("");var mn={provide:Gt,useExisting:Ie(()=>be),multi:!0};function _n(){let n=Ge()?Ge().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var vn=new B(""),be=(()=>{class n extends jt{constructor(e,i,s){super(e,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!_n())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(i){return new(i||n)(E(Te),E(Pe),E(vn,8))}}static{this.\u0275dir=L({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&M("input",function(o){return s._handleInput(o.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(o){return s._compositionEnd(o.target.value)})},features:[je([mn]),J]})}}return n})();var yn=new B(""),Cn=new B("");function Bt(n){return n!=null}function Lt(n){return pt(n)?Ze(n):n}function Ht(n){let t={};return n.forEach(e=>{t=e!=null?O(O({},t),e):t}),Object.keys(t).length===0?null:t}function Ut(n,t){return t.map(e=>e(n))}function bn(n){return!n.validate}function $t(n){return n.map(t=>bn(t)?t:e=>t.validate(e))}function En(n){if(!n)return null;let t=n.filter(Bt);return t.length==0?null:function(e){return Ht(Ut(e,t))}}function qt(n){return n!=null?En($t(n)):null}function Mn(n){if(!n)return null;let t=n.filter(Bt);return t.length==0?null:function(e){let i=Ut(e,t).map(Lt);return tt(i).pipe(et(Ht))}}function zt(n){return n!=null?Mn($t(n)):null}function xt(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function wn(n){return n._rawValidators}function On(n){return n._rawAsyncValidators}function He(n){return n?Array.isArray(n)?n:[n]:[]}function ve(n,t){return Array.isArray(n)?n.includes(t):n===t}function Ft(n,t){let e=He(t);return He(n).forEach(s=>{ve(e,s)||e.push(s)}),e}function Pt(n,t){return He(t).filter(e=>!ve(n,e))}var ye=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=qt(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=zt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Ue=class extends ye{get formDirective(){return null}get path(){return null}},ie=class extends ye{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},$e=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},An={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},os=D(O({},An),{"[class.ng-submitted]":"isSubmitted"}),Wt=(()=>{class n extends $e{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)(E(ie,2))}}static{this.\u0275dir=L({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&ot("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[J]})}}return n})();var Z="VALID",_e="INVALID",z="PENDING",ee="DISABLED",Y=class{},Ce=class extends Y{constructor(t,e){super(),this.value=t,this.source=e}},te=class extends Y{constructor(t,e){super(),this.pristine=t,this.source=e}},ne=class extends Y{constructor(t,e){super(),this.touched=t,this.source=e}},W=class extends Y{constructor(t,e){super(),this.status=t,this.source=e}};function Dn(n){return(Ee(n)?n.validators:n)||null}function Vn(n){return Array.isArray(n)?qt(n):n||null}function Sn(n,t){return(Ee(t)?t.asyncValidators:n)||null}function In(n){return Array.isArray(n)?zt(n):n||null}function Ee(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var qe=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ce(()=>this.statusReactive()),this.statusReactive=le(void 0),this._pristine=ce(()=>this.pristineReactive()),this.pristineReactive=le(!0),this._touched=ce(()=>this.touchedReactive()),this.touchedReactive=le(!1),this._events=new Xe,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return G(this.statusReactive)}set status(t){G(()=>this.statusReactive.set(t))}get valid(){return this.status===Z}get invalid(){return this.status===_e}get pending(){return this.status==z}get disabled(){return this.status===ee}get enabled(){return this.status!==ee}get pristine(){return G(this.pristineReactive)}set pristine(t){G(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return G(this.touchedReactive)}set touched(t){G(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Ft(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Ft(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Pt(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Pt(t,this._rawAsyncValidators))}hasValidator(t){return ve(this._rawValidators,t)}hasAsyncValidator(t){return ve(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(D(O({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new ne(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(s=>{s.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new ne(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(D(O({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new te(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(s=>{s.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new te(!0,i))}markAsPending(t={}){this.status=z;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new W(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(D(O({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=ee,this.errors=null,this._forEachChild(s=>{s.disable(D(O({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ce(this.value,i)),this._events.next(new W(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(D(O({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(s=>s(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Z,this._forEachChild(i=>{i.enable(D(O({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(D(O({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Z||this.status===z)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ce(this.value,e)),this._events.next(new W(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(D(O({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ee:Z}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=z,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=Lt(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(s=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(s,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,s)=>i&&i._find(s),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new W(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new H,this.statusChanges=new H}_calculateStatus(){return this._allControlsDisabled()?ee:this.errors?_e:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(z)?z:this._anyControlsHaveStatus(_e)?_e:Z}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),s=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),s&&this._events.next(new te(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new ne(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Ee(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=Vn(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=In(this._rawAsyncValidators)}};var Yt=new B("CallSetDisabledState",{providedIn:"root",factory:()=>ze}),ze="always";function xn(n,t){return[...t.path,n]}function Fn(n,t,e=ze){Nn(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),Tn(n,t),kn(n,t),Rn(n,t),Pn(n,t)}function Nt(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Pn(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function Nn(n,t){let e=wn(n);t.validator!==null?n.setValidators(xt(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=On(n);t.asyncValidator!==null?n.setAsyncValidators(xt(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let s=()=>n.updateValueAndValidity();Nt(t._rawValidators,s),Nt(t._rawAsyncValidators,s)}function Tn(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Kt(n,t)})}function Rn(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Kt(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function Kt(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function kn(n,t){let e=(i,s)=>{t.valueAccessor.writeValue(i),s&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function jn(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function Gn(n){return Object.getPrototypeOf(n.constructor)===gn}function Bn(n,t){if(!t)return null;Array.isArray(t);let e,i,s;return t.forEach(r=>{r.constructor===be?e=r:Gn(r)?i=r:s=r}),s||i||e||null}function Tt(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function Rt(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Ln=class extends qe{constructor(t=null,e,i){super(Dn(e),Sn(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ee(e)&&(e.nonNullable||e.initialValueIsDefault)&&(Rt(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Tt(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Tt(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Rt(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var Hn={provide:ie,useExisting:Ie(()=>We)},kt=Promise.resolve(),We=(()=>{class n extends ie{constructor(e,i,s,r,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new Ln,this._registered=!1,this.name="",this.update=new H,this._parent=e,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=Bn(this,r)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),jn(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Fn(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){kt.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,s=i!==0&&_t(i);kt.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?xn(e,this._parent):[e]}static{this.\u0275fac=function(i){return new(i||n)(E(Ue,9),E(yn,10),E(Cn,10),E(Gt,10),E(mt,8),E(Yt,8))}}static{this.\u0275dir=L({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[je([Hn]),J,it]})}}return n})();var Un=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Fe({type:n})}static{this.\u0275inj=xe({})}}return n})();var Jt=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Yt,useValue:e.callSetDisabledState??ze}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Fe({type:n})}static{this.\u0275inj=xe({imports:[Un]})}}return n})();var Qt=["user","model","function","system"];var Me=function(n){return n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n}(Me||{});var C=class extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}},R=class extends C{constructor(t,e){super(t),this.response=e}},Oe=class extends C{constructor(t,e,i,s){super(t),this.status=e,this.statusText=i,this.errorDetails=s}},V=class extends C{};var qn="https://generativelanguage.googleapis.com",zn="v1beta",Wn="0.21.0",Yn="genai-js",K=function(n){return n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents",n}(K||{}),Ye=class{constructor(t,e,i,s,r){this.model=t,this.task=e,this.apiKey=i,this.stream=s,this.requestOptions=r}toString(){var t,e;let i=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||zn,r=`${((e=this.requestOptions)===null||e===void 0?void 0:e.baseUrl)||qn}/${i}/${this.model}:${this.task}`;return this.stream&&(r+="?alt=sse"),r}};function Kn(n){let t=[];return n?.apiClient&&t.push(n.apiClient),t.push(`${Yn}/${Wn}`),t.join(" ")}function Jn(n){return d(this,null,function*(){var t;let e=new Headers;e.append("Content-Type","application/json"),e.append("x-goog-api-client",Kn(n.requestOptions)),e.append("x-goog-api-key",n.apiKey);let i=(t=n.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(s){throw new V(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${s.message}`)}for(let[s,r]of i.entries()){if(s==="x-goog-api-key")throw new V(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new V(`Header name ${s} can only be set using the apiClient field`);e.append(s,r)}}return e})}function Qn(n,t,e,i,s,r){return d(this,null,function*(){let o=new Ye(n,t,e,i,r);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},ti(r)),{method:"POST",headers:yield Jn(o),body:s})}})}function oe(a,l,f,p,b){return d(this,arguments,function*(n,t,e,i,s,r={},o=fetch){let{url:c,fetchOptions:m}=yield Qn(n,t,e,i,s,r);return Xn(c,m,o)})}function Xn(i,s){return d(this,arguments,function*(n,t,e=fetch){let r;try{r=yield e(n,t)}catch(o){Zn(o,n)}return r.ok||(yield ei(r,n)),r})}function Zn(n,t){let e=n;throw n instanceof Oe||n instanceof V||(e=new C(`Error fetching from ${t.toString()}: ${n.message}`),e.stack=n.stack),e}function ei(n,t){return d(this,null,function*(){let e="",i;try{let s=yield n.json();e=s.error.message,s.error.details&&(e+=` ${JSON.stringify(s.error.details)}`,i=s.error.details)}catch{}throw new Oe(`Error fetching from ${t.toString()}: [${n.status} ${n.statusText}] ${e}`,n.status,n.statusText,i)})}function ti(n){let t={};if(n?.signal!==void 0||n?.timeout>=0){let e=new AbortController;n?.timeout>=0&&setTimeout(()=>e.abort(),n.timeout),n?.signal&&n.signal.addEventListener("abort",()=>{e.abort()}),t.signal=e.signal}return t}function Je(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),we(n.candidates[0]))throw new R(`${k(n)}`,n);return ni(n)}else if(n.promptFeedback)throw new R(`Text not available. ${k(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),we(n.candidates[0]))throw new R(`${k(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Xt(n)[0]}else if(n.promptFeedback)throw new R(`Function call not available. ${k(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),we(n.candidates[0]))throw new R(`${k(n)}`,n);return Xt(n)}else if(n.promptFeedback)throw new R(`Function call not available. ${k(n)}`,n)},n}function ni(n){var t,e,i,s;let r=[];if(!((e=(t=n.candidates)===null||t===void 0?void 0:t[0].content)===null||e===void 0)&&e.parts)for(let o of(s=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)o.text&&r.push(o.text),o.executableCode&&r.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&r.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return r.length>0?r.join(""):""}function Xt(n){var t,e,i,s;let r=[];if(!((e=(t=n.candidates)===null||t===void 0?void 0:t[0].content)===null||e===void 0)&&e.parts)for(let o of(s=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)o.functionCall&&r.push(o.functionCall);if(r.length>0)return r}var ii=[Me.RECITATION,Me.SAFETY,Me.LANGUAGE];function we(n){return!!n.finishReason&&ii.includes(n.finishReason)}function k(n){var t,e,i;let s="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)s+="Response was blocked",!((t=n.promptFeedback)===null||t===void 0)&&t.blockReason&&(s+=` due to ${n.promptFeedback.blockReason}`),!((e=n.promptFeedback)===null||e===void 0)&&e.blockReasonMessage&&(s+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((i=n.candidates)===null||i===void 0)&&i[0]){let r=n.candidates[0];we(r)&&(s+=`Candidate was blocked due to ${r.finishReason}`,r.finishMessage&&(s+=`: ${r.finishMessage}`))}return s}function se(n){return this instanceof se?(this.v=n,this):new se(n)}function si(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),s,r=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(c){i[c]&&(s[c]=function(m){return new Promise(function(_,w){r.push([c,m,_,w])>1||a(c,m)})})}function a(c,m){try{l(i[c](m))}catch(_){b(r[0][3],_)}}function l(c){c.value instanceof se?Promise.resolve(c.value.v).then(f,p):b(r[0][2],c)}function f(c){a("next",c)}function p(c){a("throw",c)}function b(c,m){c(m),r.shift(),r.length&&a(r[0][0],r[0][1])}}var Zt=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function ri(n){let t=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),e=li(t),[i,s]=e.tee();return{stream:ai(i),response:oi(s)}}function oi(n){return d(this,null,function*(){let t=[],e=n.getReader();for(;;){let{done:i,value:s}=yield e.read();if(i)return Je(ci(t));t.push(s)}})}function ai(n){return si(this,arguments,function*(){let e=n.getReader();for(;;){let{value:i,done:s}=yield se(e.read());if(s)break;yield yield se(Je(i))}})}function li(n){let t=n.getReader();return new ReadableStream({start(i){let s="";return r();function r(){return t.read().then(({value:o,done:a})=>{if(a){if(s.trim()){i.error(new C("Failed to parse stream"));return}i.close();return}s+=o;let l=s.match(Zt),f;for(;l;){try{f=JSON.parse(l[1])}catch{i.error(new C(`Error parsing JSON response: "${l[1]}"`));return}i.enqueue(f),s=s.substring(l[0].length),l=s.match(Zt)}return r()})}}})}function ci(n){let t=n[n.length-1],e={promptFeedback:t?.promptFeedback};for(let i of n){if(i.candidates)for(let s of i.candidates){let r=s.index;if(e.candidates||(e.candidates=[]),e.candidates[r]||(e.candidates[r]={index:s.index}),e.candidates[r].citationMetadata=s.citationMetadata,e.candidates[r].groundingMetadata=s.groundingMetadata,e.candidates[r].finishReason=s.finishReason,e.candidates[r].finishMessage=s.finishMessage,e.candidates[r].safetyRatings=s.safetyRatings,s.content&&s.content.parts){e.candidates[r].content||(e.candidates[r].content={role:s.content.role||"user",parts:[]});let o={};for(let a of s.content.parts)a.text&&(o.text=a.text),a.functionCall&&(o.functionCall=a.functionCall),a.executableCode&&(o.executableCode=a.executableCode),a.codeExecutionResult&&(o.codeExecutionResult=a.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),e.candidates[r].content.parts.push(o)}}i.usageMetadata&&(e.usageMetadata=i.usageMetadata)}return e}function sn(n,t,e,i){return d(this,null,function*(){let s=yield oe(t,K.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(e),i);return ri(s)})}function rn(n,t,e,i){return d(this,null,function*(){let r=yield(yield oe(t,K.GENERATE_CONTENT,n,!1,JSON.stringify(e),i)).json();return{response:Je(r)}})}function on(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function re(n){let t=[];if(typeof n=="string")t=[{text:n}];else for(let e of n)typeof e=="string"?t.push({text:e}):t.push(e);return ui(t)}function ui(n){let t={role:"user",parts:[]},e={role:"function",parts:[]},i=!1,s=!1;for(let r of n)"functionResponse"in r?(e.parts.push(r),s=!0):(t.parts.push(r),i=!0);if(i&&s)throw new C("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!s)throw new C("No content is provided for sending chat message.");return i?t:e}function di(n,t){var e;let i={model:t?.model,generationConfig:t?.generationConfig,safetySettings:t?.safetySettings,tools:t?.tools,toolConfig:t?.toolConfig,systemInstruction:t?.systemInstruction,cachedContent:(e=t?.cachedContent)===null||e===void 0?void 0:e.name,contents:[]},s=n.generateContentRequest!=null;if(n.contents){if(s)throw new V("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=n.contents}else if(s)i=Object.assign(Object.assign({},i),n.generateContentRequest);else{let r=re(n);i.contents=[r]}return{generateContentRequest:i}}function en(n){let t;return n.contents?t=n:t={contents:[re(n)]},n.systemInstruction&&(t.systemInstruction=on(n.systemInstruction)),t}function hi(n){return typeof n=="string"||Array.isArray(n)?{content:re(n)}:n}var tn=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],fi={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function pi(n){let t=!1;for(let e of n){let{role:i,parts:s}=e;if(!t&&i!=="user")throw new C(`First content should be with role 'user', got ${i}`);if(!Qt.includes(i))throw new C(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(Qt)}`);if(!Array.isArray(s))throw new C("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new C("Each Content should have at least one part");let r={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let a of s)for(let l of tn)l in a&&(r[l]+=1);let o=fi[i];for(let a of tn)if(!o.includes(a)&&r[a]>0)throw new C(`Content with role '${i}' can't contain '${a}' part`);t=!0}}var nn="SILENT_ERROR",Ke=class{constructor(t,e,i,s={}){this.model=e,this.params=i,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,i?.history&&(pi(i.history),this._history=i.history)}getHistory(){return d(this,null,function*(){return yield this._sendPromise,this._history})}sendMessage(i){return d(this,arguments,function*(t,e={}){var s,r,o,a,l,f;yield this._sendPromise;let p=re(t),b={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,p]},c=Object.assign(Object.assign({},this._requestOptions),e),m;return this._sendPromise=this._sendPromise.then(()=>rn(this._apiKey,this.model,b,c)).then(_=>{var w;if(_.response.candidates&&_.response.candidates.length>0){this._history.push(p);let ae=Object.assign({parts:[],role:"model"},(w=_.response.candidates)===null||w===void 0?void 0:w[0].content);this._history.push(ae)}else{let ae=k(_.response);ae&&console.warn(`sendMessage() was unsuccessful. ${ae}. Inspect response object for details.`)}m=_}),yield this._sendPromise,m})}sendMessageStream(i){return d(this,arguments,function*(t,e={}){var s,r,o,a,l,f;yield this._sendPromise;let p=re(t),b={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,p]},c=Object.assign(Object.assign({},this._requestOptions),e),m=sn(this._apiKey,this.model,b,c);return this._sendPromise=this._sendPromise.then(()=>m).catch(_=>{throw new Error(nn)}).then(_=>_.response).then(_=>{if(_.candidates&&_.candidates.length>0){this._history.push(p);let w=Object.assign({},_.candidates[0].content);w.role||(w.role="model"),this._history.push(w)}else{let w=k(_);w&&console.warn(`sendMessageStream() was unsuccessful. ${w}. Inspect response object for details.`)}}).catch(_=>{_.message!==nn&&console.error(_)}),m})}};function gi(n,t,e,i){return d(this,null,function*(){return(yield oe(t,K.COUNT_TOKENS,n,!1,JSON.stringify(e),i)).json()})}function mi(n,t,e,i){return d(this,null,function*(){return(yield oe(t,K.EMBED_CONTENT,n,!1,JSON.stringify(e),i)).json()})}function _i(n,t,e,i){return d(this,null,function*(){let s=e.requests.map(o=>Object.assign(Object.assign({},o),{model:t}));return(yield oe(t,K.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:s}),i)).json()})}var Ae=class{constructor(t,e,i={}){this.apiKey=t,this._requestOptions=i,e.model.includes("/")?this.model=e.model:this.model=`models/${e.model}`,this.generationConfig=e.generationConfig||{},this.safetySettings=e.safetySettings||[],this.tools=e.tools,this.toolConfig=e.toolConfig,this.systemInstruction=on(e.systemInstruction),this.cachedContent=e.cachedContent}generateContent(i){return d(this,arguments,function*(t,e={}){var s;let r=en(t),o=Object.assign(Object.assign({},this._requestOptions),e);return rn(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},r),o)})}generateContentStream(i){return d(this,arguments,function*(t,e={}){var s;let r=en(t),o=Object.assign(Object.assign({},this._requestOptions),e);return sn(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},r),o)})}startChat(t){var e;return new Ke(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(e=this.cachedContent)===null||e===void 0?void 0:e.name},t),this._requestOptions)}countTokens(i){return d(this,arguments,function*(t,e={}){let s=di(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),e);return gi(this.apiKey,this.model,s,r)})}embedContent(i){return d(this,arguments,function*(t,e={}){let s=hi(t),r=Object.assign(Object.assign({},this._requestOptions),e);return mi(this.apiKey,this.model,s,r)})}batchEmbedContents(i){return d(this,arguments,function*(t,e={}){let s=Object.assign(Object.assign({},this._requestOptions),e);return _i(this.apiKey,this.model,t,s)})}};var De=class{constructor(t){this.apiKey=t}getGenerativeModel(t,e){if(!t.model)throw new C("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Ae(this.apiKey,t,e)}getGenerativeModelFromCachedContent(t,e,i){if(!t.name)throw new V("Cached content must contain a `name` field.");if(!t.model)throw new V("Cached content must contain a `model` field.");let s=["model","systemInstruction"];for(let o of s)if(e?.[o]&&t[o]&&e?.[o]!==t[o]){if(o==="model"){let a=e.model.startsWith("models/")?e.model.replace("models/",""):e.model,l=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(a===l)continue}throw new V(`Different value for "${o}" specified in modelParams (${e[o]}) and cachedContent (${t[o]})`)}let r=Object.assign(Object.assign({},e),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new Ae(this.apiKey,r,i)}};var vi=["chatInput"],yi=["fileInput"],Ci=["messageContainer"],bi=(n,t)=>({"fa-paper-plane":n,"fa-spinner fa-spin":t}),Ei=(n,t)=>({message:!0,sent:n,received:t});function Mi(n,t){if(n&1&&g(0,"img",28),n&2){let e=j().$implicit;v("src","data:image/jpeg;base64,"+e.imageBase64,Ne)}}function wi(n,t){if(n&1&&(u(0,"div",22),g(1,"img",23),u(2,"div",24),g(3,"p",25),U(4,Mi,1,1,"img",26),u(5,"span",27),A(6),ht(7,"date"),h()()()),n&2){let e=t.$implicit;v("ngClass",X(10,Ei,e.role==="user",e.role==="model")),Re("data-streaming",e.isStreaming),y(),v("src",e.role==="user"?"/assets/img/user-icon.png":"/assets/img/med-rob.png",Ne)("alt",e.role==="user"?"User Avatar":"AI Avatar"),y(2),v("innerHTML",e.content,rt),y(),v("ngIf",e.imageBase64),y(2),ke(ft(7,7,e.timestamp,"shortTime"))}}function Oi(n,t){if(n&1){let e=Q();u(0,"div",29)(1,"span"),A(2),h(),u(3,"button",30),M("click",function(){S(e);let s=j();return I(s.removeFile())}),g(4,"i",31),h()()}if(n&2){let e=j();y(2),ke(e.selectedFile.name)}}var Ve=class n{messages=[];user_input="";selectedFile=null;allowedFileTypes=".jpg,.jpeg,.png";model_response=null;isTyping=!1;gemini_chat=null;isStreaming=!1;bb_base64Image="";chatInput;fileInput;messageContainer;convertFileToBase64(t){return d(this,null,function*(){return new Promise((e,i)=>{let s=new FileReader;s.onload=()=>{let o=s.result.split(",")[1];e(o)},s.onerror=r=>i(r),s.readAsDataURL(t)})})}onFileSelected(t){let e=t.target;if(e.files&&e.files.length>0&&(this.selectedFile=e.files[0],this.selectedFile.size>5e6)){alert("File is too large. Please select a file under 5MB."),this.removeFile();return}}removeFile(){this.selectedFile=null,this.fileInput.nativeElement.value=""}call_model(){return d(this,null,function*(){debugger;if(this.selectedFile){let t=yield this.convertFileToBase64(this.selectedFile),e=yield fetch("https://detect.roboflow.com/infer/workflows/thesis-lss/detect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({api_key:"fuPc24Rp5tcwcU4EGL37",inputs:{image:{type:"base64",value:t}}})});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let i=yield e.json();if(this.model_response=i,console.log("API Response:",i),this.model_response?.outputs&&i.outputs.length>0){let s=this.model_response.outputs[0].predictions.predictions;if(s&&s.length>0){let r="";s.forEach((a,l)=>{a.class_id==1&&(r+=`
Stenosis detected at L`+l+" - L"+(l+1)+` IVD
`)});let o=this.model_response.outputs[0].bounding_box_visualization;return this.bb_base64Image=o?.value,r==""?"no-stenosis detected":r}else return"Please use the correct MRI - JPEG Converted Image OR Clear picture of your MRI"}}return""})}handleFunctionCall(t){return d(this,null,function*(){debugger;switch(t){case"analyze_image":return this.selectedFile?{image_description:yield this.call_model()}:{image_description:"No image provided for analysis"};default:throw new Error(`Unknown function: ${t}`)}})}scrollToBottom(){setTimeout(()=>{let t=this.messageContainer.nativeElement;t.scrollTop=t.scrollHeight})}initialize_gemini(){return new De("AIzaSyBP4A-_MrvT3Fna3Zw5BCXW9NkaTvE0YgU").getGenerativeModel({model:"gemini-1.5-pro",systemInstruction:{role:"system",parts:[{text:`You are an expert medical assistant specialized in Lumbar spinal stenosis and you can't diagnose anyother disease. 
                 1. Be professional and caring about user health.
                 2. If you find this text **IMAGE SELECTED - PASS IT TO ANALYZE_IMAGE FUNCTION** in prompt then always use function "analyze_image" from your tools.
                 3. If you don't find this text **IMAGE SELECTED - PASS IT TO ANALYZE_IMAGE FUNCTION** in prompt and user asking to scan the image then ask to upload an image.
                 4. Never tell user what function you are going to call for analysis.
                 5. After getting the analysis result, explain it to the user and ask questions to suggest more personalized cure routine in a clear and professional manner.
                 6. Suggest the user, some relevant exercises, diet and precautions based on their infected IVD. 
                 7. For regular conversations about lumbar spinal stenosis, provide helpful information and ask relevant questions.`}]},generationConfig:{temperature:0},tools:[{functionDeclarations:[{name:"analyze_image",description:"Analyzes an image for lumbar spinal stenosis. Use this function to get analysis on the image."}]}]}).startChat({})}constructor(){this.gemini_chat=this.initialize_gemini()}ngAfterViewInit(){this.chatInput.nativeElement.focus()}sendMessage(){return d(this,null,function*(){try{if(this.user_input.trim()||this.selectedFile){this.user_input.trim()&&this.messages.push({role:"user",content:this.user_input.trim(),timestamp:new Date});let o=this.user_input.trim();this.user_input="",this.isTyping=!0;try{let a=this.messages.length;if(this.messages.push({role:"model",content:"",timestamp:new Date,isStreaming:!0}),this.selectedFile){let l=o+" **IMAGE SELECTED - PASS IT TO ANALYZE_IMAGE FUNCTION**";var t=yield this.gemini_chat?.sendMessage(l);debugger;if(t){let f="";try{console.log("Chunk:",t);let p=t.response.candidates?.[0]?.content?.parts,b=p?.[p?.findIndex(m=>m?.functionCall?.name=="analyze_image")]?.functionCall;if(b){console.log("Function call detected:",b);let m=yield this.handleFunctionCall(b.name);t=yield this.gemini_chat?.sendMessage([{functionResponse:{name:"analyze_image",response:m}}])}let c=t?.response.text();c&&(f+=c,this.messages[a].content=f,this.messages[a].imageBase64=this.bb_base64Image,this.messages=[...this.messages],this.scrollToBottom())}catch(p){debugger;console.error("Error processing chunk:",p),this.isStreaming=!1,this.isTyping=!1,JSON.stringify(p).includes("429")?this.messages[this.messages.length-1].content="Unfortunately, quota on your free plan has been exhausted. Please wait until tomorrow :)":this.messages[this.messages.length-1].content="I apologize, but I encountered an error processing your request.",this.messages[this.messages.length-1].isStreaming=!1}this.messages[a].isStreaming=!1,this.messages=[...this.messages]}}else{let l=yield this.gemini_chat?.sendMessageStream(o);debugger;if(l){let f="";try{for(var e=Qe(l.stream),i,s,r;i=!(s=yield e.next()).done;i=!1){let p=s.value;if(p.candidates){let c=p.candidates[0].content.parts[0].functionCall?.name;if(c){let m=yield this.handleFunctionCall(c);l=yield this.gemini_chat?.sendMessageStream(JSON.stringify(m));continue}}let b=p.text();f+=b,this.messages[a].content=f,this.messages=[...this.messages],this.scrollToBottom()}}catch{r=[s]}finally{try{i&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r[0]}}this.messages[a].isStreaming=!1,this.messages=[...this.messages]}this.isStreaming=!1,this.removeFile()}}catch(a){console.error("Error calling Gemini API:",a),this.isStreaming=!1,this.isTyping=!1,JSON.stringify(a).includes("429")?this.messages[this.messages.length-1].content="Unfortunately, quota on your free plan has been exhausted. Please wait until tomorrow :)":this.messages[this.messages.length-1].content="I apologize, but I encountered an error processing your request.",this.messages[this.messages.length-1].isStreaming=!1}this.isTyping=!1,this.scrollToBottom(),this.removeFile()}}catch(o){console.error("Error in sendMessage:",o),this.isStreaming=!1,this.isTyping=!1}})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-chat"]],viewQuery:function(e,i){if(e&1&&(F(vi,5),F(yi,5),F(Ci,5)),e&2){let s;P(s=N())&&(i.chatInput=s.first),P(s=N())&&(i.fileInput=s.first),P(s=N())&&(i.messageContainer=s.first)}},standalone:!0,features:[T],decls:25,vars:9,consts:[["messageContainer",""],["chatInput",""],["fileInput",""],[1,"chat-container"],[1,"chat-header"],[1,"user-info"],["src","/assets/img/med-rob.png","alt","AI Assistant",1,"avatar"],[1,"user-details"],[1,"username"],[1,"active-status"],[1,"online-indicator"],[1,"chat-messages"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"chat-input"],["type","text","placeholder","Type a message",3,"ngModelChange","keyup.enter","ngModel"],[1,"file-upload"],["type","file",2,"display","none",3,"change","accept"],[1,"file-button",3,"click"],[1,"fas","fa-paperclip"],["class","selected-file",4,"ngIf"],[1,"send-button",3,"click","disabled"],[1,"fas",3,"ngClass"],[3,"ngClass"],[1,"avatar",3,"src","alt"],[1,"message-content"],[3,"innerHTML"],["alt","Analysis visualization","class","message-image",3,"src",4,"ngIf"],[1,"timestamp"],["alt","Analysis visualization",1,"message-image",3,"src"],[1,"selected-file"],[1,"remove-file",3,"click"],[1,"fas","fa-times"]],template:function(e,i){if(e&1){let s=Q();u(0,"div",3)(1,"div",4)(2,"div",5),g(3,"img",6),u(4,"div",7)(5,"span",8),A(6,"HEALO"),h(),u(7,"div",9),g(8,"span",10),u(9,"span"),A(10,"Active now"),h()()()()(),u(11,"div",11,0),U(13,wi,8,13,"div",12),h(),u(14,"div",13)(15,"input",14,1),ut("ngModelChange",function(o){return S(s),ct(i.user_input,o)||(i.user_input=o),I(o)}),M("keyup.enter",function(){return S(s),I(i.sendMessage())}),h(),u(17,"div",15)(18,"input",16,2),M("change",function(o){return S(s),I(i.onFileSelected(o))}),h(),u(20,"button",17),M("click",function(){S(s);let o=at(19);return I(o.click())}),g(21,"i",18),h()(),U(22,Oi,5,1,"div",19),u(23,"button",20),M("click",function(){return S(s),I(i.sendMessage())}),g(24,"i",21),h()()()}e&2&&(y(13),v("ngForOf",i.messages),y(2),lt("ngModel",i.user_input),y(3),v("accept",i.allowedFileTypes),y(4),v("ngIf",i.selectedFile),y(),v("disabled",i.isTyping),y(),v("ngClass",X(6,bi,!i.isTyping,i.isTyping)))},dependencies:[$,ue,yt,de,Ct,Jt,be,Wt,We],styles:['.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.user-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.username[_ngcontent-%COMP%]{font-weight:600;font-size:1.1rem;color:#2c3e50;letter-spacing:.5px}.active-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:.7rem;color:#65676b}.online-indicator[_ngcontent-%COMP%]{width:6px;height:6px;background-color:#2ecc71;border-radius:50%;display:inline-block}.user-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.chat-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:88%;margin:0 auto;position:relative}.chat-header[_ngcontent-%COMP%]{padding:15px 20px;border-bottom:1px solid #dbdddf;display:flex;justify-content:space-between;align-items:center}.chat-messages[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:15px}.chat-input[_ngcontent-%COMP%]{padding:15px 20px;display:flex;gap:10px;align-items:center}.chat-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:10px 15px;border:1px solid #dee2e6;border-radius:20px;outline:none}.send-button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:20px;background:var(--accent-color);color:#fff;transition:.3s;cursor:pointer}.send-button[_ngcontent-%COMP%]:hover{opacity:.8}.send-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.message[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:10px}.message[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.message-image[_ngcontent-%COMP%]{max-width:100%;border-radius:8px;margin:8px 0}.message-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:70%;padding:10px 15px;border-radius:15px;background:#f8f9fa}.message.sent[_ngcontent-%COMP%]{flex-direction:row-reverse}.message.sent[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:var(--accent-color);color:#fff}.message.received[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background:#f8f9fa}.message-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;white-space:pre-wrap;word-wrap:break-word}.message.received[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:after{content:""}.message.received[data-streaming=true][_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:after{content:"|";animation:_ngcontent-%COMP%_blink 1s step-end infinite}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:0}}.timestamp[_ngcontent-%COMP%]{font-size:.75rem;color:#6c757d;margin-top:5px;display:block}.sent[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{text-align:right;color:#dbdddf}.typing-indicator[_ngcontent-%COMP%]{display:flex;gap:5px;padding:10px;margin-left:50px}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:8px;height:8px;background:#90949c;border-radius:50%;animation:_ngcontent-%COMP%_bounce 1s infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-5px)}}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){animation-delay:.4s}.file-upload[_ngcontent-%COMP%]{display:flex;align-items:center}.file-button[_ngcontent-%COMP%]{padding:10px;border:none;border-radius:50%;background:transparent;cursor:pointer;color:#6c757d;transition:color .3s}.file-button[_ngcontent-%COMP%]:hover{color:#007bff}.selected-file[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;font-size:.8rem;color:#6c757d}.remove-file[_ngcontent-%COMP%]{padding:2px 5px;border:none;background:transparent;color:#dc3545;cursor:pointer;border-radius:50%}.remove-file[_ngcontent-%COMP%]:hover{background:#dc35451a}']})};var Ai=["scrollContainer"];function Di(n,t){if(n&1&&g(0,"app-hero"),n&2){let e=j();v("@fadeAnimation",e.currentSection)}}function Vi(n,t){if(n&1&&g(0,"app-chat"),n&2){let e=j();v("@fadeAnimation",e.currentSection)}}var Se=class n{title="doctorai";currentSection="hero";scrollContainer;onDataReceived(t){debugger;this.currentSection=t;let e=this.scrollContainer.nativeElement.querySelector(`app-${this.currentSection}`);e&&e.scrollIntoView({behavior:"smooth",block:"start"})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-root"]],viewQuery:function(e,i){if(e&1&&F(Ai,7),e&2){let s;P(s=N())&&(i.scrollContainer=s.first)}},standalone:!0,features:[T],decls:10,vars:2,consts:[["scrollContainer",""],[3,"dataEmitter"],[1,"main"],[1,"background-container"],["src","../assets/img/bg-2.jpg","alt","background"],[1,"light-overlay"],[1,"content"],[1,"scroll-container"],[4,"ngIf"]],template:function(e,i){if(e&1){let s=Q();u(0,"app-header",1),M("dataEmitter",function(o){return S(s),I(i.onDataReceived(o))}),h(),u(1,"main",2)(2,"div",3),g(3,"img",4)(4,"div",5),h(),u(5,"div",6)(6,"div",7,0),U(8,Di,1,1,"app-hero",8)(9,Vi,1,1,"app-chat",8),h()()()}e&2&&(y(8),v("ngIf",i.currentSection==="hero"),y(),v("ngIf",i.currentSection==="chat"))},dependencies:[pe,me,Ve,$,de],styles:[".main[_ngcontent-%COMP%]{position:relative;height:100vh;margin:0;padding:0;overflow:hidden}.background-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100vh;z-index:-1}.background-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.light-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#ffffffb2}.content[_ngcontent-%COMP%]{position:relative;height:100%;width:100%;overflow:hidden}.scroll-container[_ngcontent-%COMP%]{position:relative;height:100%;width:100%}app-hero[_ngcontent-%COMP%], app-chat[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;left:0;top:0}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;overflow:hidden}"],data:{animation:[Mt("fadeAnimation",[fe("hero => chat",[q({transform:"translateY(100%)",opacity:0}),he("500ms cubic-bezier(0.4, 0, 0.2, 1)",q({transform:"translateY(0)",opacity:1}))]),fe("chat => hero",[q({transform:"translateY(-100%)",opacity:0}),he("500ms cubic-bezier(0.4, 0, 0.2, 1)",q({transform:"translateY(0)",opacity:1}))]),fe(":leave",[he("500ms cubic-bezier(0.4, 0, 0.2, 1)",q({opacity:0}))])])]}})};var an=[{path:"",redirectTo:"",pathMatch:"full"}];var ln={providers:[gt({eventCoalescing:!0}),Dt(an),Et(),Ot(),nt(wt)]};var Si={providers:[At()]},cn=vt(ln,Si);var Ii=()=>bt(Se,cn),Ls=Ii;export{Ls as a};
